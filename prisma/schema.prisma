generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id                       String       @id @default(uuid())
  name                     String
  email                    String       @unique
  role                     String
  password                 String
  gender                   String
  phone                    String
  address                  String
  resetPasswordToken       String?      @unique
  resetPasswordTokenExpiry DateTime?
  userId                   String
  Enrollment               Enrollment[]
  Payment                  Payment[]
}

model Enrollment {
  id           String    @id @default(uuid())
  enrollmentId String
  userId       String
  phone        String
  email        String
  course       String
  date         String
  status       String
  amount       BigInt
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  Payment      Payment[]
}

model Payment {
  id            String     @id @default(uuid())
  userId        String
  course        String
  date          String
  amount        BigInt
  paymentStatus String
  paymentId     String
  enrollmentId  String
  enrollment    Enrollment @relation(fields: [enrollmentId], references: [id], onDelete: Cascade)
  user          User       @relation(fields: [userId], references: [id], onDelete: Cascade)
}
