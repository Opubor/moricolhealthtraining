// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// datasource db {
//   provider = "postgresql"
//   url      = "file:./dev.db"
// }

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL") // uses connection pooling
  // directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id                       String       @id @default(uuid())
  name                     String
  email                    String       @unique
  role                     String
  password                 String
  gender                   String
  phone                    String
  address                  String
  userId                   String
  resetPasswordToken       String?      @unique
  resetPasswordTokenExpiry DateTime?
  Enrollment               Enrollment[]
  Payment                  Payment[]
}

model Enrollment {
  id           String    @id @default(uuid())
  enrollmentId String
  userId       String
  phone        String
  email        String
  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  course       String
  date         String
  status       String
  amount       BigInt
  timeTable    String?
  Payment      Payment[]
}

model Payment {
  id            String     @id @default(uuid())
  userId        String
  user          User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  course        String
  date          String
  amount        BigInt
  paymentStatus String
  paymentId     String
  enrollmentId  String
  enrollment    Enrollment @relation(fields: [enrollmentId], references: [id], onDelete: Cascade)
}
